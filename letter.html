<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Letter</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <nav>
    <ul>
      <li><a href="index.html">Back</a></li>
    </ul>
  </nav>

  <main class="letter-content fade-in">
    <h1 class="gold-text">A Letter for You</h1>
    <p>
      This letter contains the deepest words I could never say out loud.  
      I hope it reaches you with the warmth and sincerity I intend.  
      Thank you for being in my life.
    </p>
  </main>

  <!-- Hidden background music element -->
  <audio id="bgMusic" src="song2-until-i-found-you.mp3" loop></audio>

  <script>
    const bgMusic = document.getElementById("bgMusic");

    // Check if music should be played from sessionStorage
    if (sessionStorage.getItem("playMusic") === "true" && !sessionStorage.getItem("musicPlaying")) {
      bgMusic.play().then(() => {
        sessionStorage.setItem("musicPlaying", "true");
      }).catch((error) => {
        console.log("Autoplay blocked:", error);
      });
    }

    // Save current music time when switching tabs or pages
    document.addEventListener("visibilitychange", () => {
      if (document.visibilityState === "hidden") {
        sessionStorage.setItem("musicTime", bgMusic.currentTime);
      } else if (sessionStorage.getItem("musicTime")) {
        bgMusic.currentTime = parseFloat(sessionStorage.getItem("musicTime"));
        bgMusic.play();
      }
    });
  </script>
</body>
</html>
